<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="http://at.alicdn.com/t/font_711811_v34fxlm07h.css" />
		<link rel="stylesheet" href="./css/study.css" />
		<link rel="stylesheet" href="css/swiper-4.1.0.min.css" />
		<script src="js/swiper.min.js"></script>
		<script src="js/jquery-3.1.1.min.js"></script>
		<style type="text/css">
			
			.mui-content{
				background: #FFFFFF;
			}
			.swiper-container{
				width: 95%;
				height: 160px;
				margin: 20px auto;
				margin-bottom: 15px;
				border-radius: 5px;
			}
			
			.swiper-slide>img{
				width: 100%;
				height: 100%;
				border-radius: 5px;
			}
			
			
			.swiper-container1{
				width: 95%;
				/*height: 100px;*/
				margin: 0 auto;
				
				/*background: darkcyan;*/
				 background: #fdfafc;
				 background: #FFFFFF;
				 
				 border-radius: 5px;
				padding: 15px 10px  15px;
				overflow: hidden;
			}
			.swiper-container1>.swiper-wrapper{
				min-height: 150px;
			}
			.swiper-container1>.swiper-wrapper>.swiper-slide{
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: space-between;
			
				
			}
			.swiper-container1>.swiper-wrapper>.swiper-slide>span{
				font-size: 12px;
				letter-spacing: 1px;
				color: #666666;
			}
			.swiper-container1>.swiper-wrapper>.swiper-slide>img{
				width: 50px;
				height: 50px;
				margin-bottom: 12px;
			}
		</style>
	</head>

	<body>
		
		<header class="mui-bar mui-bar-nav" style="display: flex;align-items: center;justify-content: space-between;">
		    <!--<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>-->
		    <i style="margin-left: 5px; color: #e281c2;" class="iconfont icon-shoucang2"></i>
		    <h1 class="mui-title">学习乐园</h1>
		    <i  style="margin-right: 5px; color: #e281c2;" class="iconfont icon-leimupinleifenleileibie--"></i>
		</header>
			<div class="mui-content">
			    <div class="swiper-container">
					<div class="swiper-wrapper">
					  <div class="swiper-slide">
					  
					  	 <img src="images/111.jpg" alt="" />
					  </div>
					    <div class="swiper-slide">
					  	 <img src="images/222.jpg" alt="" />
					  </div>
					     <div class="swiper-slide">
					  	 <img src="http://cpftest.oss-cn-beijing.aliyuncs.com/momSay/banner/banner55.jpg" alt="" />
					  </div>
					  <div class="swiper-slide">
					  	  <img src="images/333.jpg" alt="" />
					  </div>
					</div>
				</div>
              <div class="swiper-container1">
			    <div id="dd" class="swiper-wrapper">
			     
			    </div>
			 
			  
			 </div>
					 
		        <div style="width: 95%; height: 60px; background: #fdfafc;border-radius: 10px;border-bottom-left-radius: 0px; border-bottom-right-radius: 0px;   margin: 0 auto; margin-top:10px;line-height: 60px;">	
		       			<p style="margin-left: 10px;font-size: 16px;color: #666666;">推荐学习</p>
		       			<p></p>
		       	</div>
		       	<div id="content" class="content box content--center">
		 
		       		
					<!--<div id="listImgsBox" class="grid">
						<div>
							<div>
								<img src="images/111111.png" alt="" />
								<p>
									<span>21365次播放</span>
									<img src="img/play3.png" alt="" />
								</p>
							</div>
							<div>
								<img src="images/111111.png" alt="" />
								<p>
									<span>21365次播放</span>
									<img src="img/play3.png" alt="" />
								</p>
							</div>
						</div>
					</div>-->
					
					
		
		       	</div>
			</div>

	<script src="js/mui.min.js"></script>
	<script type="text/javascript">
		 	mui.init({
				preloadPages:[{
				  'url':'./subpages/articleDetail22.html',
				  'id':'articleDetail22.html'
					    }],
					    
				})
	</script>
		
		
	</body>

</html>
<script>

    var swiper = new Swiper('.swiper-container', {
      spaceBetween: 0,
      centeredSlides: true,
      loop:true,
      autoplay: {
        delay: 3500,
        disableOnInteraction: false,
      },
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
    
    });
     
     
    

</script>
<script>
	mui.plusReady(function(){
		var access_token = localStorage.getItem("access_token");//取回students变量
		mui.ajax({
			url:'http://www.internet-web.cn/Images/ImageMainNew',
			type:'GET',
  	    	data:{'access_token':access_token},
  	    	success:function(data){
  	    		
  	    		data = JSON.parse(data);
  	    		
  	    		var listCate = data.data.listCate;
  	    		
  	    		for(var i = 0;i<listCate.length;i++){
  	    			
  	    			var cateId = listCate[i].ID;
  	    			var Name = listCate[i].Name;
  	    			var Url = listCate[i].Url;
  	    			  
				      var  ddHtml = ' <div id="dd'+i+'" class="swiper-slide">'+
								      	'<img src="'+Url+'" alt="" />'+
								      	'<span>'+Name+'</span>'+
								      	'<input type="text" hidden  value="'+cateId+'">'+
								      '</div>' 
								      
								      
						$('#dd').append(ddHtml);
						
						var swiper = new Swiper('.swiper-container1', {
						        slidesPerView: 4,
						      slidesPerColumn: 2,
						      spaceBetween: 20,
						      pagination: {
						        el: '.swiper-pagination',
						        clickable: true,
						      },
						    });
						    
						//  分类点击事件-------------------
						document.getElementById('dd'+i+'').addEventListener('tap',function(){
							$('#content').html('');
							
							
							mui.ajax({
								url:'http://www.internet-web.cn/Images/ImageInfo',
								type:'GET',
								data:{access_token:access_token,cateId:$(this).children('input').val()},
								success:function(data){
//									alert(data);
									data = JSON.parse(data);
//									alert(data);

									//----------
					  	    		 listImgs2 = data.data;
					  	    		listImgsLength = data.data.length;
						    	
					  	    		
					  	    		
					  	    		if(listImgsLength % 2 ==0){
					  	
										hang();
										return false;
									}else{
										listImgsLength++;
					
					
										hang();
									}
										
										
								}
							})
						})
						
						//--------点击end----------------
					
  	    			    
  	    		}
  	    		//--------------上部分结束-----------------
  	    		
  	    		
  	    		
  	    		//----------下部分开始-----------------------------
  	    		 var listImgs2 = data.data.listImgs;
  	    		var listImgsLength = data.data.listImgs.length;
//	    		alert('第一次渲染---'+listImgsLength);
  	    		
  	    		
  	    		if(listImgsLength % 2 ==0){
					hang();
					return false;
				}else{
					listImgsLength++;
					// mui.toast(musicListLength);
					hang();
				}
				

  	    		
  	    		function hang(){
  	    				
//	    				alert('111---------'+listImgsLength);
//	    				alert(JSON.stringify(listImgs2));
	  	    			for(var j = 0;j<listImgsLength/2;j++){
	    				
	    			
	    			    var ID = listImgs2[j*2].ID;
	    				var ImgUrl = listImgs2[j*2].ImgUrl
	    				var ImgName = listImgs2[j*2].ImgName;
	    				var Mp3Url= listImgs2[j*2].Mp3Url;
	    				var ImgCate= listImgs2[j*2].ImgCate;   
	    				var flag= listImgs2[j*2].Flag;  
	    				var timesNum = listImgs2[j*2].timesNum;
	    				
	    				
	    				var ID1 = listImgs2[j*2+1].ID;
	    				var ImgUrl1 = listImgs2[j*2+1].ImgUrl
	    				var ImgName1 = listImgs2[j*2+1].ImgName;
	    				var Mp3Url1= listImgs2[j*2+1].Mp3Url;
	    				var ImgCate1= listImgs2[j*2+1].ImgCate;   
	    				var flag1= listImgs2[j*2+1].Flag;  
	    				var timesNum1 = listImgs2[j*2+1].timesNum;
	    			
	    			
	    			   var contentHtml = '<div id="listImgsBox" class="grid">'+
												'<div>'+
													'<div>'+
														'<img src="'+ImgUrl+'" alt="" />'+
														'<p>'+
															'<span>'+ImgName+'次播放</span>'+
															'<img id="play'+j+'" src="img/play3.png" alt="" />'+
															'<audio style="display:none;" src="'+Mp3Url+'">'+
															'<input id="input" type="text" hidden value="'+ID+'">'+
															'<input id="flag" type="text" hidden value="'+flag+'">'+
															'<input id="cateid" type="text" hidden  value="'+ImgCate+'">'+
														'</p>'+
													'</div>'+
													'<div>'+
														'<img src="'+ImgUrl1+'" alt="" />'+
														'<p>'+
															'<span>'+ImgName1+'次播放</span>'+
															'<img id="play1'+j+'" src="img/play3.png" alt="" />'+
															'<audio style="display:none;" src="'+Mp3Url1+'">'+
															'<input id="input" type="text" hidden value="'+ID1+'">'+
															'<input id="flag" type="text" hidden value="'+flag1+'">'+
															'<input id="cateid" type="text" hidden  value="'+ImgCate1+'">'+
														'</p>'+
													'</div>'+
												'</div>'+
											'</div>';
											
											
						$('#content').append(contentHtml);
	    			
	    				
	    				
	    	    		document.getElementById('play'+j+'').addEventListener('tap',function(){
	    	    			
//							$(this).next('audio')[0].play();							
							 mui.openWindow({
	                            url:'./subpages/articleDetail22.html',
	//	                            id:'storyList.html',	                          
								extras: {'is':$(this).siblings().find('#input').val(),'flag':$(this).siblings().find('#flag').val(),'cateid':$(this).siblings().find('#cateid').val()},		
	                       	 })
						});
						
						document.getElementById('play1'+j+'').addEventListener('tap',function(){
							 mui.openWindow({
	                            url:'./subpages/articleDetail22.html',
	//	                            id:'storyList.html',	                           
								extras: {'is':$(this).siblings().find('#input').val(),'flag':$(this).siblings().find('#flag').val(),'cateid':$(this).siblings().find('#cateid').val()},		
	                       	 })
//							$(this).next('audio')[0].play();							
						})
	    				
	    			
	    				
	    				}
  	    		}
  	    		
  	    	
  	    	}
		})
	})
</script>

	